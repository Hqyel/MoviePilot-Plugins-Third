# Nullbr资源搜索插件

## 📝 插件简介

Nullbr资源搜索插件是为MoviePilot-v2设计的资源搜索增强插件，通过集成Nullbr API，为用户提供优先级资源搜索功能。

**主要特点:**
- 🚀 **优先搜索**: 在MoviePilot搜索其他资源站之前，优先使用Nullbr API查找资源
- 🔍 **智能跳过**: 如果Nullbr找到资源，自动跳过后续搜索，提高效率
- 🎯 **多种资源**: 支持115网盘、磁力链接、ed2k、m3u8等多种资源类型
- 📊 **统计监控**: 提供详细的使用统计和状态监控
- ⚙️ **灵活配置**: 支持自定义资源类型和搜索参数

## 🛠️ 安装方法

### 方法1: 直接复制文件
1. 将`nullbrsearch`目录复制到MoviePilot的`app/plugins/`目录下
2. 重启MoviePilot服务

### 方法2: Git克隆
```bash
cd /path/to/moviepilot/app/plugins/
git clone <repository-url> nullbrsearch
```

## 🔧 配置说明

### 必需配置
- **APP_ID**: Nullbr API的应用ID，用于基本搜索功能（必填）

### 可选配置
- **API_KEY**: Nullbr API的密钥，用于获取具体下载链接（可选）
- **资源类型**: 可以选择启用/禁用不同的资源类型
  - 115网盘分享
  - 磁力链接
  - M3U8在线视频
  - ED2K链接

### 高级设置
- **搜索超时**: 设置API请求的超时时间（10-120秒）

## 📖 使用方法

1. **获取API密钥**: 从Nullbr官方获取APP_ID和API_KEY
2. **配置插件**: 在MoviePilot插件设置中填入相关信息
3. **启用插件**: 打开插件开关，插件开始工作
4. **正常使用**: 通过MoviePilot的任何搜索功能，插件会自动优先搜索Nullbr资源

## 🌐 支持的API接口

插件提供了以下REST API接口：

### `/nullbr/search`
- **方法**: GET
- **参数**: `keyword`, `page`
- **功能**: 搜索影视资源

### `/nullbr/resources`
- **方法**: POST
- **参数**: `media_type`, `tmdbid`, `resource_type`
- **功能**: 获取具体资源链接

### `/nullbr/test`
- **方法**: GET
- **功能**: 测试API连接状态

## 📊 工作原理

```
用户搜索请求
      ↓
MoviePilot接收
      ↓
Nullbr插件拦截 ← 优先级最高
      ↓
调用Nullbr API
      ↓
找到资源? → 是 → 返回结果给用户 → 结束搜索
      ↓
      否
      ↓
继续搜索其他资源站
```

## 🔍 支持的媒体类型

- **电影** (movie): 支持获取电影资源
- **剧集** (tv): 支持获取完整剧集资源
- **合集** (collection): 支持搜索系列合集
- **人物** (person): 支持人物相关搜索

## 📈 状态监控

插件提供详细的使用统计：
- 总搜索次数
- 成功搜索次数
- 失败搜索次数
- 最后搜索时间
- API连接状态
- 资源类型启用状态

## ⚠️ 注意事项

1. **API限制**: 请遵守Nullbr API的使用限制和频率限制
2. **网络连接**: 确保MoviePilot服务器能够访问`api.nullbr.eu.org`
3. **权限要求**: API_KEY的权限级别决定了能获取的资源类型
4. **日志监控**: 如遇问题请检查MoviePilot日志中的相关错误信息

## 🐛 故障排除

### 常见问题

**Q: 插件显示已启用但不工作**
A: 检查APP_ID是否正确配置，查看日志中的错误信息

**Q: 能搜索但无法获取下载链接**
A: 需要配置有效的API_KEY才能获取具体资源链接

**Q: API请求超时**
A: 可能是网络问题，尝试增加超时时间或检查网络连接

**Q: 搜索结果为空**
A: 检查搜索关键词，或者查看Nullbr API是否有该资源

### 日志排查
在MoviePilot日志中搜索以下关键词：
- `Nullbr`
- `nullbr`
- `NullbrSearch`

## 📝 更新日志

### v1.0.0 (2024-08-06)
- 🎉 首次发布
- ✅ 支持基本搜索功能
- ✅ 支持多种资源类型
- ✅ 提供完整的配置界面
- ✅ 集成API接口
- ✅ 添加使用统计功能

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个插件！

## 📄 许可证

本插件基于GPL-3.0许可证开源。

## 🙏 致谢

- 感谢MoviePilot项目提供的优秀插件框架
- 感谢Nullbr提供的资源API服务